{"version":3,"file":"1-timer-DHKdv9R9.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/themes/material_blue.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport default iziToast;\n\nlet userSelectedDate = null;\nlet indexInterval = null;\n\nconst elements = {\n  get button() {\n    return document.querySelector('.button');\n  },\n  get input() {\n    return document.querySelector('#datetime-picker');\n  },\n  get daysElement() {\n    return document.querySelector('[data-days]');\n  },\n  get hoursElement() {\n    return document.querySelector('[data-hours]');\n  },\n  get minutesElement() {\n    return document.querySelector('[data-minutes]');\n  },\n  get secondsElement() {\n    return document.querySelector('[data-seconds]');\n  },\n};\n\nconst {\n  button,\n  input,\n  daysElement,\n  hoursElement,\n  minutesElement,\n  secondsElement,\n} = elements;\n\nbutton.addEventListener('click', startTimer);\nbutton.setAttribute('disabled', true);\n\nfunction startTimer() {\n  if (!userSelectedDate) return;\n\n  button.setAttribute('disabled', true);\n  input.setAttribute('disabled', true);\n\n  if (indexInterval) {\n    clearInterval(indexInterval);\n  }\n\n  const updateTimer = () => {\n    const now = new Date();\n    const ms = userSelectedDate - now;\n\n    if (ms <= 0) {\n      clearInterval(indexInterval);\n      updateTimerDisplay({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n      endMessage();\n      input.removeAttribute('disabled');\n\n      return;\n    }\n\n    updateTimerDisplay(convertMs(ms));\n  };\n\n  updateTimer();\n  indexInterval = setInterval(updateTimer, 1000);\n}\n\nfunction updateTimerDisplay({ days, hours, minutes, seconds }) {\n  daysElement.textContent = String(days).padStart(2, '0');\n  hoursElement.textContent = String(hours).padStart(2, '0');\n  minutesElement.textContent = String(minutes).padStart(2, '0');\n  secondsElement.textContent = String(seconds).padStart(2, '0');\n}\n\nfunction validateDate(date) {\n  const now = new Date();\n  if (date <= now) {\n    errorMessage();\n    button.setAttribute('disabled', true);\n  } else {\n    button.removeAttribute('disabled');\n\n    userSelectedDate = date;\n  }\n}\n\nflatpickr(input, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    validateDate(selectedDates[0]);\n  },\n\n  onChange(selectedDates) {\n    validateDate(selectedDates[0]);\n  },\n});\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  return {\n    days: Math.floor(ms / day),\n    hours: Math.floor((ms % day) / hour),\n    minutes: Math.floor(((ms % day) % hour) / minute),\n    seconds: Math.floor((((ms % day) % hour) % minute) / second),\n  };\n}\n\nconst errorMessage = () => {\n  iziToast.show({\n    title: 'WARNING',\n    titleColor: 'white',\n    iconUrl: `https://img.icons8.com/?size=100&id=6734ErbSl05C&format=png&color=FFFFFF`,\n    iconColor: 'white',\n    message: 'Please choose a date in the future',\n    color: '#fca503',\n    messageColor: 'white',\n    messageSize: '18',\n    timeout: 4000,\n    position: 'topRight',\n  });\n};\n\nconst endMessage = () => {\n  iziToast.show({\n    title: 'TIME IS UP',\n    titleColor: 'white',\n    message: ' Please choose a date',\n    color: '#00c234',\n    messageColor: 'white',\n    messageSize: '18',\n    timeout: 1000000,\n    position: 'topRight',\n  });\n};\n"],"names":["userSelectedDate","indexInterval","elements","button","input","daysElement","hoursElement","minutesElement","secondsElement","startTimer","updateTimer","ms","updateTimerDisplay","endMessage","convertMs","days","hours","minutes","seconds","validateDate","date","errorMessage","flatpickr","selectedDates","iziToast"],"mappings":"gDAQA,IAAIA,EAAmB,KACnBC,EAAgB,KAEpB,MAAMC,EAAW,CACf,IAAI,QAAS,CACX,OAAO,SAAS,cAAc,SAAS,CACxC,EACD,IAAI,OAAQ,CACV,OAAO,SAAS,cAAc,kBAAkB,CACjD,EACD,IAAI,aAAc,CAChB,OAAO,SAAS,cAAc,aAAa,CAC5C,EACD,IAAI,cAAe,CACjB,OAAO,SAAS,cAAc,cAAc,CAC7C,EACD,IAAI,gBAAiB,CACnB,OAAO,SAAS,cAAc,gBAAgB,CAC/C,EACD,IAAI,gBAAiB,CACnB,OAAO,SAAS,cAAc,gBAAgB,CAC/C,CACH,EAEM,CACJ,OAAAC,EACA,MAAAC,EACA,YAAAC,EACA,aAAAC,EACA,eAAAC,EACA,eAAAC,CACF,EAAIN,EAEJC,EAAO,iBAAiB,QAASM,CAAU,EAC3CN,EAAO,aAAa,WAAY,EAAI,EAEpC,SAASM,GAAa,CACpB,GAAI,CAACT,EAAkB,OAEvBG,EAAO,aAAa,WAAY,EAAI,EACpCC,EAAM,aAAa,WAAY,EAAI,EAE/BH,GACF,cAAcA,CAAa,EAG7B,MAAMS,EAAc,IAAM,CAExB,MAAMC,EAAKX,EADC,IAAI,KAGhB,GAAIW,GAAM,EAAG,CACX,cAAcV,CAAa,EAC3BW,EAAmB,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EAChEC,IACAT,EAAM,gBAAgB,UAAU,EAEhC,MACD,CAEDQ,EAAmBE,EAAUH,CAAE,CAAC,CACpC,EAEED,IACAT,EAAgB,YAAYS,EAAa,GAAI,CAC/C,CAEA,SAASE,EAAmB,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC7Db,EAAY,YAAc,OAAOU,CAAI,EAAE,SAAS,EAAG,GAAG,EACtDT,EAAa,YAAc,OAAOU,CAAK,EAAE,SAAS,EAAG,GAAG,EACxDT,EAAe,YAAc,OAAOU,CAAO,EAAE,SAAS,EAAG,GAAG,EAC5DT,EAAe,YAAc,OAAOU,CAAO,EAAE,SAAS,EAAG,GAAG,CAC9D,CAEA,SAASC,EAAaC,EAAM,CAEtBA,GADQ,IAAI,MAEdC,IACAlB,EAAO,aAAa,WAAY,EAAI,IAEpCA,EAAO,gBAAgB,UAAU,EAEjCH,EAAmBoB,EAEvB,CAEAE,EAAUlB,EAAO,CACf,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQmB,EAAe,CACrBJ,EAAaI,EAAc,CAAC,CAAC,CAC9B,EAED,SAASA,EAAe,CACtBJ,EAAaI,EAAc,CAAC,CAAC,CAC9B,CACH,CAAC,EAED,SAAST,EAAUH,EAAI,CAMrB,MAAO,CACL,KAAM,KAAK,MAAMA,EAAK,KAAG,EACzB,MAAO,KAAK,MAAOA,EAAK,MAAO,IAAI,EACnC,QAAS,KAAK,MAAQA,EAAK,MAAO,KAAQ,GAAM,EAChD,QAAS,KAAK,MAASA,EAAK,MAAO,KAAQ,IAAU,GAAM,CAC/D,CACA,CAEA,MAAMU,EAAe,IAAM,CACzBG,EAAS,KAAK,CACZ,MAAO,UACP,WAAY,QACZ,QAAS,2EACT,UAAW,QACX,QAAS,qCACT,MAAO,UACP,aAAc,QACd,YAAa,KACb,QAAS,IACT,SAAU,UACd,CAAG,CACH,EAEMX,EAAa,IAAM,CACvBW,EAAS,KAAK,CACZ,MAAO,aACP,WAAY,QACZ,QAAS,wBACT,MAAO,UACP,aAAc,QACd,YAAa,KACb,QAAS,IACT,SAAU,UACd,CAAG,CACH"}